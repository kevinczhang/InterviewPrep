You are given a string s of length n containing only characters a and b. A substring of s called a semi-alternating substring if it does not contain three identical consecutive characters. Return the length of the longest semi-alternating substring.

**Example 1:**
```
Input: "baaabbabbb"
Output: 7
Explanation: "aabbabb"
```

**Example 2:**
```
Input: "abaaaa"
Output: 4
Explanation: "abaa"
```
